CMAKE_MINIMUM_REQUIRED(VERSION 2.8.11)

FUNCTION(PRINT_VAR  VAR_NAME)
  MESSAGE("${VAR_NAME} = '${${VAR_NAME}}'")
ENDFUNCTION()

PRINT_VAR(CMAKE_MODULE_PATH)
PRINT_VAR(USE_XSDK_DEFAULTS)
PRINT_VAR(XSDK_USE_COMPILER_ENV_VARS)

INCLUDE("CMakeForceCompiler")

PROJECT(MY_PROJ NONE)

MESSAGE("")
MESSAGE("Before XSDK: CMAKE_CXX_COMPILER = '${CMAKE_CXX_COMPILER}'")
MESSAGE("Before XSDK: CMAKE_CXX_FLAGS = '${CMAKE_CXX_FLAGS}'")
MESSAGE("Before XSDK: CMAKE_CXX_FLAGS_DEBUG = '${CMAKE_CXX_FLAGS_DEBUG}'")
MESSAGE("Before XSDK: CMAKE_CXX_FLAGS_RELEASE = '${CMAKE_CXX_FLAGS_RELEASE}'")
MESSAGE("Before XSDK: BUILD_SHARED_LIBS = '${BUILD_SHARED_LIBS}'")
MESSAGE("Before XSDK: CMAKE_BUILD_TYPE = '${CMAKE_BUILD_TYPE}'")


MESSAGE("\nProcess XSDK defaults ...")
INCLUDE("${CMAKE_CURRENT_LIST_DIR}/../XSDKDefaults.cmake")


MESSAGE("")
MESSAGE("Before EL: CMAKE_CXX_COMPILER = '${CMAKE_CXX_COMPILER}'")
MESSAGE("Before EL: CMAKE_CXX_FLAGS = '${CMAKE_CXX_FLAGS}'")
MESSAGE("Before EL: CMAKE_CXX_FLAGS_DEBUG = '${CMAKE_CXX_FLAGS_DEBUG}'")
MESSAGE("Before EL: CMAKE_CXX_FLAGS_RELEASE = '${CMAKE_CXX_FLAGS_RELEASE}'")
MESSAGE("Before EL: BUILD_SHARED_LIBS = '${BUILD_SHARED_LIBS}'")
MESSAGE("Before EL: CMAKE_BUILD_TYPE = '${CMAKE_BUILD_TYPE}'")


IF (CMAKE_CXX_COMPILER STREQUAL "CMAKE_CXX_COMPILER_HAS_NOT_BEEN_SET")
  MESSAGE(FATAL_ERROR "CMAKE_CXX_COMPILER is not set by the user, aborting!")
ELSEIF(CMAKE_CXX_COMPILER STREQUAL "")
  MESSAGE(FATAL_ERROR "CMAKE_CXX_COMPILER was set by user to empty '', aborting!")
ENDIF()


MESSAGE("\n*** Call ENABLE_LANGUAGE(CXX) ...\n")
ENABLE_LANGUAGE(CXX)


MESSAGE("")
MESSAGE("After EL: CMAKE_CXX_COMPILER = '${CMAKE_CXX_COMPILER}'")
MESSAGE("After EL: CMAKE_CXX_FLAGS = '${CMAKE_CXX_FLAGS}'")
MESSAGE("After EL: CMAKE_CXX_FLAGS_DEBUG = '${CMAKE_CXX_FLAGS_DEBUG}'")
MESSAGE("After EL: CMAKE_CXX_FLAGS_RELEASE = '${CMAKE_CXX_FLAGS_RELEASE}'")
MESSAGE("After EL: BUILD_SHARED_LIBS = '${BUILD_SHARED_LIBS}'")
MESSAGE("After EL: CMAKE_BUILD_TYPE = '${CMAKE_BUILD_TYPE}'")
MESSAGE("After EL: CMAKE_CXX_COMPILER_ID = '${CMAKE_CXX_COMPILER_ID}'")
